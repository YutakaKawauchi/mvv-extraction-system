# Admin Panel è¨­è¨ˆæ›¸

**æœ€çµ‚æ›´æ–°**: 2025-07-13  
**Phase**: 3å®Œäº†ï¼ˆAdmin Panel with Hidden Menu Accessï¼‰

## æ¦‚è¦

Admin Panelã¯ã€MVVåˆ†æã‚·ã‚¹ãƒ†ãƒ ã®é«˜åº¦ãªç®¡ç†ãƒ»è¨ºæ–­æ©Ÿèƒ½ã‚’æä¾›ã™ã‚‹éš ã—ãƒ¡ãƒ‹ãƒ¥ãƒ¼ã‚·ã‚¹ãƒ†ãƒ ã§ã™ã€‚Ctrl+Shift+Aã®ç‰¹æ®Šã‚­ãƒ¼ã‚³ãƒ³ãƒ“ãƒãƒ¼ã‚·ãƒ§ãƒ³ã§ã‚¢ã‚¯ã‚»ã‚¹ã—ã€ãƒ‡ãƒ¼ã‚¿è¨ºæ–­ã€å›å¾©ãƒ„ãƒ¼ãƒ«ã€ã‚·ã‚¹ãƒ†ãƒ è¨ºæ–­ã®3ã¤ã®ä¸»è¦æ©Ÿèƒ½ã‚’é€šã˜ã¦ã€ã‚·ã‚¹ãƒ†ãƒ ã®å¥å…¨æ€§ç¶­æŒã¨é‹ç”¨æ”¯æ´ã‚’è¡Œã„ã¾ã™ã€‚

## è¨­è¨ˆç›®æ¨™

### âœ… é”æˆæ¸ˆã¿ç›®æ¨™
1. **éš ã—ãƒ¡ãƒ‹ãƒ¥ãƒ¼ã‚¢ã‚¯ã‚»ã‚¹**: Ctrl+Shift+Aã«ã‚ˆã‚‹ç§˜åŒ¿æ€§ã®é«˜ã„ã‚¢ã‚¯ã‚»ã‚¹æ–¹æ³•
2. **ãƒ‡ãƒ¼ã‚¿è¨ºæ–­æ©Ÿèƒ½**: ä¼æ¥­ãƒ‡ãƒ¼ã‚¿æ•´åˆæ€§ã€MVVå®Œå…¨æ€§ã€JSICåˆ†é¡ã®è‡ªå‹•ãƒã‚§ãƒƒã‚¯
3. **å›å¾©ãƒ„ãƒ¼ãƒ«**: ãƒãƒ«ã‚¯æŠ½å‡ºã€å˜ä½“ãƒ†ã‚¹ãƒˆå®Ÿè¡Œã€ãƒãƒƒãƒå‡¦ç†ã®å¾©æ—§æ©Ÿèƒ½
4. **ã‚·ã‚¹ãƒ†ãƒ è¨ºæ–­**: APIå¥å…¨æ€§ã€ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ç›£è¦–ã€ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸åˆ†æ
5. **ã‚»ã‚­ãƒ¥ã‚¢ã‚¢ã‚¯ã‚»ã‚¹**: ç®¡ç†è€…æ¨©é™ã®ç¢ºèªã¨æ“ä½œãƒ­ã‚°ã®è¨˜éŒ²
6. **ãƒ¢ãƒ¼ãƒ€ãƒ«UI**: ã‚ªãƒ¼ãƒãƒ¼ãƒ¬ã‚¤å½¢å¼ã«ã‚ˆã‚‹éä¾µå…¥çš„ãªç®¡ç†ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹
7. **ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ç›£è¦–**: ã‚·ã‚¹ãƒ†ãƒ çŠ¶æ…‹ã®ãƒ©ã‚¤ãƒ–ç›£è¦–ã¨ã‚¢ãƒ©ãƒ¼ãƒˆæ©Ÿèƒ½

## ã‚·ã‚¹ãƒ†ãƒ ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£

### å…¨ä½“æ§‹æˆ
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      Admin Panel System                    â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ Hidden Access   â”‚  â”‚ Data Diagnosticsâ”‚  â”‚ System Mon  â”‚  â”‚
â”‚  â”‚                 â”‚  â”‚                 â”‚  â”‚             â”‚  â”‚
â”‚  â”‚ â€¢ Ctrl+Shift+A  â”‚  â”‚ â€¢ Integrity Chk â”‚  â”‚ â€¢ API Healthâ”‚  â”‚
â”‚  â”‚ â€¢ Auth Check    â”‚  â”‚ â€¢ MVV Complete  â”‚  â”‚ â€¢ Perf Mon  â”‚  â”‚
â”‚  â”‚ â€¢ Modal UI      â”‚  â”‚ â€¢ JSIC Valid    â”‚  â”‚ â€¢ Storage   â”‚  â”‚
â”‚  â”‚ â€¢ Session Log   â”‚  â”‚ â€¢ Data Quality  â”‚  â”‚ â€¢ Error Log â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚           â”‚                     â”‚                     â”‚     â”‚
â”‚           â–¼                     â–¼                     â–¼     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚               Recovery Tools Engine                     â”‚  â”‚
â”‚  â”‚ â€¢ Bulk Extraction  â€¢ Single Test  â€¢ Batch Processing   â”‚  â”‚
â”‚  â”‚ â€¢ Pipeline Retry   â€¢ Data Repair  â€¢ Cache Management   â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### ã‚¢ã‚¯ã‚»ã‚¹ãƒ•ãƒ­ãƒ¼
```
1. éš ã—ã‚­ãƒ¼ã‚³ãƒ³ãƒ“ãƒãƒ¼ã‚·ãƒ§ãƒ³ (Ctrl+Shift+A)
   â†“
2. èªè¨¼ç¢ºèª (JWT/ã‚»ãƒƒã‚·ãƒ§ãƒ³æ¤œè¨¼)
   â†“
3. Admin Panel ãƒ¢ãƒ¼ãƒ€ãƒ«è¡¨ç¤º
   â†“
4. 3ã¤ã®ãƒ¡ã‚¤ãƒ³ã‚¿ãƒ–è¡¨ç¤º
   â”œâ”€ ãƒ‡ãƒ¼ã‚¿è¨ºæ–­
   â”œâ”€ å›å¾©ãƒ„ãƒ¼ãƒ«  
   â””â”€ ã‚·ã‚¹ãƒ†ãƒ è¨ºæ–­
   â†“
5. å„æ©Ÿèƒ½ã®å®Ÿè¡Œã¨çµæœè¡¨ç¤º
   â†“
6. æ“ä½œãƒ­ã‚°ã®è¨˜éŒ²
   â†“
7. ãƒ‘ãƒãƒ«é–‰ã˜ã‚‹ (Escape ã¾ãŸã¯ Close button)
```

## æŠ€è¡“ä»•æ§˜

### 1. éš ã—ã‚¢ã‚¯ã‚»ã‚¹ã‚·ã‚¹ãƒ†ãƒ 

#### 1.1 ã‚­ãƒ¼ãƒœãƒ¼ãƒ‰ã‚·ãƒ§ãƒ¼ãƒˆã‚«ãƒƒãƒˆ
```typescript
interface AdminAccessConfig {
  keyCombo: 'ctrl+shift+a';
  timeout: 5000;           // 5ç§’ä»¥å†…ã«å…¥åŠ›
  sessionRequired: true;   // èªè¨¼ã‚»ãƒƒã‚·ãƒ§ãƒ³å¿…é ˆ
  logAccess: true;         // ã‚¢ã‚¯ã‚»ã‚¹ãƒ­ã‚°è¨˜éŒ²
}

class HiddenMenuAccess {
  private keySequence: string[] = [];
  private timeoutId: NodeJS.Timeout | null = null;
  private readonly TARGET_SEQUENCE = ['Control', 'Shift', 'KeyA'];

  constructor() {
    this.initializeKeyboardListener();
  }

  private initializeKeyboardListener(): void {
    document.addEventListener('keydown', this.handleKeyDown.bind(this));
    document.addEventListener('keyup', this.handleKeyUp.bind(this));
  }

  private handleKeyDown(event: KeyboardEvent): void {
    // ç®¡ç†è€…ãƒ‘ãƒãƒ«ãŒæ—¢ã«é–‹ã„ã¦ã„ã‚‹å ´åˆã¯ç„¡è¦–
    if (this.isAdminPanelOpen()) return;
    
    // ç‰¹å®šã®ã‚­ãƒ¼ã‚³ãƒ³ãƒ“ãƒãƒ¼ã‚·ãƒ§ãƒ³ã‚’ãƒã‚§ãƒƒã‚¯
    if (event.ctrlKey && event.shiftKey && event.code === 'KeyA') {
      event.preventDefault();
      this.triggerAdminPanel();
      return;
    }
  }

  private async triggerAdminPanel(): Promise<void> {
    try {
      // èªè¨¼çŠ¶æ…‹ç¢ºèª
      const isAuthenticated = await this.checkAuthStatus();
      if (!isAuthenticated) {
        console.warn('Admin panel access denied: Authentication required');
        this.showAuthRequiredMessage();
        return;
      }

      // ã‚¢ã‚¯ã‚»ã‚¹ãƒ­ã‚°è¨˜éŒ²
      await this.logAdminAccess();

      // Admin Panelè¡¨ç¤º
      this.showAdminPanel();
    } catch (error) {
      console.error('Admin panel access error:', error);
    }
  }

  private async checkAuthStatus(): Promise<boolean> {
    const authStore = useAuthStore.getState();
    if (!authStore.isAuthenticated) return false;

    // JWTæ¤œè¨¼
    try {
      const response = await fetch('/.netlify/functions/auth-validate-v2', {
        method: 'POST',
        headers: {
          'Authorization': `Bearer ${authStore.token}`
        }
      });
      return response.ok;
    } catch {
      return false;
    }
  }

  private async logAdminAccess(): Promise<void> {
    const logEntry = {
      timestamp: new Date().toISOString(),
      action: 'admin_panel_access',
      user: useAuthStore.getState().user?.username || 'unknown',
      userAgent: navigator.userAgent,
      sessionId: this.generateSessionId()
    };

    // ãƒ­ãƒ¼ã‚«ãƒ«ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸ã«è¨˜éŒ²ï¼ˆé–‹ç™ºç’°å¢ƒï¼‰
    if (import.meta.env.DEV) {
      const logs = JSON.parse(localStorage.getItem('admin_logs') || '[]');
      logs.push(logEntry);
      localStorage.setItem('admin_logs', JSON.stringify(logs.slice(-100))); // æœ€å¤§100ä»¶
    }

    console.log('Admin panel accessed:', logEntry);
  }
}
```

#### 1.2 Admin Panel UI
```typescript
export const AdminPanel: React.FC = () => {
  const [isVisible, setIsVisible] = useState(false);
  const [activeTab, setActiveTab] = useState<AdminTab>('diagnostics');
  const [isLoading, setIsLoading] = useState(false);

  useEffect(() => {
    const hiddenAccess = new HiddenMenuAccess();
    
    // Admin Panelè¡¨ç¤ºã‚¤ãƒ™ãƒ³ãƒˆãƒªã‚¹ãƒŠãƒ¼
    const handleAdminPanelShow = () => setIsVisible(true);
    document.addEventListener('show-admin-panel', handleAdminPanelShow);

    // ESCã‚­ãƒ¼ã§é–‰ã˜ã‚‹
    const handleEscKey = (event: KeyboardEvent) => {
      if (event.key === 'Escape' && isVisible) {
        setIsVisible(false);
      }
    };
    document.addEventListener('keydown', handleEscKey);

    return () => {
      document.removeEventListener('show-admin-panel', handleAdminPanelShow);
      document.removeEventListener('keydown', handleEscKey);
    };
  }, [isVisible]);

  if (!isVisible) return null;

  const adminTabs: AdminTabConfig[] = [
    {
      id: 'diagnostics',
      name: 'ãƒ‡ãƒ¼ã‚¿è¨ºæ–­',
      icon: Database,
      component: DataDiagnostics,
      description: 'ä¼æ¥­ãƒ‡ãƒ¼ã‚¿ã®æ•´åˆæ€§ã¨MVVå®Œå…¨æ€§ã‚’ãƒã‚§ãƒƒã‚¯'
    },
    {
      id: 'recovery',
      name: 'å›å¾©ãƒ„ãƒ¼ãƒ«',
      icon: RefreshCw,
      component: RecoveryTools,
      description: 'ãƒãƒ«ã‚¯æŠ½å‡ºã¨å¤±æ•—ãƒ‡ãƒ¼ã‚¿ã®å›å¾©å‡¦ç†'
    },
    {
      id: 'system',
      name: 'ã‚·ã‚¹ãƒ†ãƒ è¨ºæ–­',
      icon: Activity,
      component: SystemDiagnostics,
      description: 'APIå¥å…¨æ€§ã¨ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ç›£è¦–'
    }
  ];

  return (
    <div className="fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center">
      <Card className="w-full max-w-6xl h-[80vh] bg-white shadow-2xl">
        {/* ãƒ˜ãƒƒãƒ€ãƒ¼ */}
        <div className="flex items-center justify-between p-4 border-b">
          <div className="flex items-center gap-3">
            <Shield className="w-6 h-6 text-red-600" />
            <h2 className="text-xl font-bold">ã‚·ã‚¹ãƒ†ãƒ ç®¡ç†ãƒ‘ãƒãƒ«</h2>
            <Badge variant="outline" className="text-xs">
              Hidden Access
            </Badge>
          </div>
          <Button
            variant="ghost"
            size="sm"
            onClick={() => setIsVisible(false)}
            className="text-gray-500 hover:text-gray-700"
          >
            <X className="w-5 h-5" />
          </Button>
        </div>

        <div className="flex h-full">
          {/* ã‚µã‚¤ãƒ‰ãƒ¡ãƒ‹ãƒ¥ãƒ¼ */}
          <div className="w-64 border-r bg-gray-50 p-4">
            <nav className="space-y-2">
              {adminTabs.map((tab) => (
                <button
                  key={tab.id}
                  onClick={() => setActiveTab(tab.id)}
                  className={`w-full flex items-center gap-3 p-3 rounded-lg text-left transition-colors ${
                    activeTab === tab.id
                      ? 'bg-blue-100 text-blue-700 border border-blue-200'
                      : 'hover:bg-gray-100 text-gray-700'
                  }`}
                >
                  <tab.icon className="w-5 h-5" />
                  <div>
                    <div className="font-medium">{tab.name}</div>
                    <div className="text-xs text-gray-500">{tab.description}</div>
                  </div>
                </button>
              ))}
            </nav>

            {/* ã‚·ã‚¹ãƒ†ãƒ æƒ…å ± */}
            <div className="mt-6 p-3 bg-white rounded-lg border">
              <h4 className="font-medium text-sm mb-2">ã‚·ã‚¹ãƒ†ãƒ æƒ…å ±</h4>
              <div className="space-y-1 text-xs text-gray-600">
                <div>Version: 3.0.0 (Phase 3)</div>
                <div>Build: {import.meta.env.VITE_BUILD_ID || 'dev'}</div>
                <div>User: {useAuthStore(state => state.user?.username)}</div>
                <div>Session: {new Date().toLocaleTimeString('ja-JP')}</div>
              </div>
            </div>
          </div>

          {/* ãƒ¡ã‚¤ãƒ³ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ */}
          <div className="flex-1 p-6 overflow-auto">
            <ErrorBoundary fallback={<AdminErrorFallback />}>
              <AdminTabContent 
                tab={activeTab}
                isLoading={isLoading}
                onLoadingChange={setIsLoading}
              />
            </ErrorBoundary>
          </div>
        </div>
      </Card>
    </div>
  );
};
```

### 2. ãƒ‡ãƒ¼ã‚¿è¨ºæ–­ã‚·ã‚¹ãƒ†ãƒ 

#### 2.1 æ•´åˆæ€§ãƒã‚§ãƒƒã‚¯
```typescript
class DataIntegrityChecker {
  async performComprehensiveCheck(): Promise<DiagnosticResult> {
    const results: DiagnosticResult = {
      timestamp: new Date(),
      checks: [],
      summary: { passed: 0, failed: 0, warnings: 0 },
      recommendations: []
    };

    // ä¼æ¥­ãƒ‡ãƒ¼ã‚¿æ•´åˆæ€§ãƒã‚§ãƒƒã‚¯
    const companyCheck = await this.checkCompanyDataIntegrity();
    results.checks.push(companyCheck);

    // MVVãƒ‡ãƒ¼ã‚¿å®Œå…¨æ€§ãƒã‚§ãƒƒã‚¯
    const mvvCheck = await this.checkMVVDataCompleteness();
    results.checks.push(mvvCheck);

    // JSICåˆ†é¡æ¤œè¨¼
    const jsicCheck = await this.checkJSICClassificationValidity();
    results.checks.push(jsicCheck);

    // Visual Analyticsæ•´åˆæ€§
    const visualCheck = await this.checkVisualAnalyticsIntegrity();
    results.checks.push(visualCheck);

    // ãƒ‡ãƒ¼ã‚¿å“è³ªè©•ä¾¡
    const qualityCheck = await this.checkDataQuality();
    results.checks.push(qualityCheck);

    // ã‚µãƒãƒªãƒ¼è¨ˆç®—
    results.summary = this.calculateSummary(results.checks);
    results.recommendations = this.generateRecommendations(results.checks);

    return results;
  }

  private async checkCompanyDataIntegrity(): Promise<CheckResult> {
    const companies = await companyStore.getAllCompanies();
    const issues: Issue[] = [];
    let healthyCount = 0;

    for (const company of companies) {
      const companyIssues: Issue[] = [];

      // å¿…é ˆãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ãƒã‚§ãƒƒã‚¯
      if (!company.name?.trim()) {
        companyIssues.push({
          type: 'error',
          field: 'name',
          message: 'ä¼æ¥­åãŒç©ºã§ã™',
          suggestion: 'ä¼æ¥­åã‚’å…¥åŠ›ã—ã¦ãã ã•ã„'
        });
      }

      if (!company.website?.trim()) {
        companyIssues.push({
          type: 'warning',
          field: 'website',
          message: 'ã‚¦ã‚§ãƒ–ã‚µã‚¤ãƒˆURLãŒæœªè¨­å®šã§ã™',
          suggestion: 'å…¬å¼ã‚¦ã‚§ãƒ–ã‚µã‚¤ãƒˆURLã‚’è¿½åŠ ã—ã¦ãã ã•ã„'
        });
      }

      // URLå½¢å¼ãƒã‚§ãƒƒã‚¯
      if (company.website && !this.isValidURL(company.website)) {
        companyIssues.push({
          type: 'error',
          field: 'website',
          message: 'ç„¡åŠ¹ãªURLå½¢å¼ã§ã™',
          suggestion: 'http://ã¾ãŸã¯https://ã§å§‹ã¾ã‚‹æœ‰åŠ¹ãªURLã‚’å…¥åŠ›ã—ã¦ãã ã•ã„'
        });
      }

      // ã‚«ãƒ†ã‚´ãƒªãƒã‚§ãƒƒã‚¯
      if (!company.category || company.category === 'ãã®ä»–') {
        companyIssues.push({
          type: 'warning',
          field: 'category',
          message: 'æ¥­ç•Œã‚«ãƒ†ã‚´ãƒªãŒæœªåˆ†é¡ã§ã™',
          suggestion: 'é©åˆ‡ãªæ¥­ç•Œã‚«ãƒ†ã‚´ãƒªã‚’è¨­å®šã—ã¦ãã ã•ã„'
        });
      }

      if (companyIssues.length === 0) {
        healthyCount++;
      } else {
        issues.push(...companyIssues.map(issue => ({
          ...issue,
          companyId: company.id,
          companyName: company.name
        })));
      }
    }

    return {
      name: 'ä¼æ¥­ãƒ‡ãƒ¼ã‚¿æ•´åˆæ€§',
      status: issues.filter(i => i.type === 'error').length === 0 ? 'passed' : 'failed',
      totalItems: companies.length,
      healthyItems: healthyCount,
      issues,
      metrics: {
        completenessRate: (healthyCount / companies.length) * 100,
        errorRate: (issues.filter(i => i.type === 'error').length / companies.length) * 100
      }
    };
  }

  private async checkMVVDataCompleteness(): Promise<CheckResult> {
    const companies = await companyStore.getAllCompanies();
    const mvvData = await mvvStore.getAllMVVResults();
    const issues: Issue[] = [];
    let completeCount = 0;

    for (const company of companies) {
      const mvv = mvvData.find(m => m.companyId === company.id);
      
      if (!mvv) {
        issues.push({
          type: 'warning',
          companyId: company.id,
          companyName: company.name,
          field: 'mvv',
          message: 'MVVãƒ‡ãƒ¼ã‚¿ãŒæœªæŠ½å‡ºã§ã™',
          suggestion: 'MVVæŠ½å‡ºã‚’å®Ÿè¡Œã—ã¦ãã ã•ã„'
        });
        continue;
      }

      const mvvIssues: Issue[] = [];

      // Mission ãƒã‚§ãƒƒã‚¯
      if (!mvv.mission?.trim()) {
        mvvIssues.push({
          type: 'warning',
          field: 'mission',
          message: 'MissionãŒæœªè¨­å®šã§ã™',
          suggestion: 'Missionï¼ˆä½¿å‘½ï¼‰ã‚’æŠ½å‡ºã¾ãŸã¯æ‰‹å‹•å…¥åŠ›ã—ã¦ãã ã•ã„'
        });
      }

      // Vision ãƒã‚§ãƒƒã‚¯
      if (!mvv.vision?.trim()) {
        mvvIssues.push({
          type: 'warning',
          field: 'vision',
          message: 'VisionãŒæœªè¨­å®šã§ã™',
          suggestion: 'Visionï¼ˆç†å¿µï¼‰ã‚’æŠ½å‡ºã¾ãŸã¯æ‰‹å‹•å…¥åŠ›ã—ã¦ãã ã•ã„'
        });
      }

      // Values ãƒã‚§ãƒƒã‚¯
      if (!mvv.values || mvv.values.length === 0) {
        mvvIssues.push({
          type: 'warning',
          field: 'values',
          message: 'ValuesãŒæœªè¨­å®šã§ã™',
          suggestion: 'Valuesï¼ˆä¾¡å€¤è¦³ï¼‰ã‚’æŠ½å‡ºã¾ãŸã¯æ‰‹å‹•å…¥åŠ›ã—ã¦ãã ã•ã„'
        });
      }

      // ä¿¡é ¼åº¦ãƒã‚§ãƒƒã‚¯
      if (mvv.confidence_scores) {
        ['mission', 'vision', 'values'].forEach(key => {
          const score = mvv.confidence_scores[key];
          if (score !== undefined && score < 0.7) {
            mvvIssues.push({
              type: 'warning',
              field: `${key}_confidence`,
              message: `${key}ã®ä¿¡é ¼åº¦ãŒä½ã„ã§ã™ (${(score * 100).toFixed(1)}%)`,
              suggestion: 'æ‰‹å‹•ç¢ºèªã¾ãŸã¯å†æŠ½å‡ºã‚’æ¨å¥¨ã—ã¾ã™'
            });
          }
        });
      }

      if (mvvIssues.length === 0) {
        completeCount++;
      } else {
        issues.push(...mvvIssues.map(issue => ({
          ...issue,
          companyId: company.id,
          companyName: company.name
        })));
      }
    }

    return {
      name: 'MVVãƒ‡ãƒ¼ã‚¿å®Œå…¨æ€§',
      status: completeCount === companies.length ? 'passed' : 'warning',
      totalItems: companies.length,
      healthyItems: completeCount,
      issues,
      metrics: {
        completenessRate: (completeCount / companies.length) * 100,
        extractionRate: (mvvData.length / companies.length) * 100
      }
    };
  }

  private async checkVisualAnalyticsIntegrity(): Promise<CheckResult> {
    const screenshots = await screenshotStorage.getAllScreenshots();
    const issues: Issue[] = [];
    let validCount = 0;

    // ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸æ•´åˆæ€§ãƒã‚§ãƒƒã‚¯
    for (const screenshot of screenshots) {
      try {
        const imageData = await screenshotStorage.getScreenshotData(screenshot.id);
        if (!imageData) {
          issues.push({
            type: 'error',
            field: 'imageData',
            message: `ç”»åƒãƒ‡ãƒ¼ã‚¿ãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“ (${screenshot.id})`,
            suggestion: 'ã‚¹ã‚¯ãƒªãƒ¼ãƒ³ã‚·ãƒ§ãƒƒãƒˆã‚’å†ã‚­ãƒ£ãƒ—ãƒãƒ£ã—ã¦ãã ã•ã„'
          });
        } else {
          validCount++;
        }
      } catch (error) {
        issues.push({
          type: 'error',
          field: 'storage',
          message: `ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸ã‚¢ã‚¯ã‚»ã‚¹ã‚¨ãƒ©ãƒ¼ (${screenshot.id})`,
          suggestion: 'IndexedDBã®çŠ¶æ…‹ã‚’ç¢ºèªã—ã¦ãã ã•ã„'
        });
      }
    }

    // TabIDå¦¥å½“æ€§ãƒã‚§ãƒƒã‚¯
    const validTabIds = ['finder', 'trends', 'wordcloud', 'positioning', 'uniqueness', 'quality'];
    const invalidTabIds = screenshots.filter(s => !validTabIds.includes(s.tabId));
    
    if (invalidTabIds.length > 0) {
      issues.push({
        type: 'warning',
        field: 'tabId',
        message: `ç„¡åŠ¹ãªTabIDãŒ${invalidTabIds.length}ä»¶ã‚ã‚Šã¾ã™`,
        suggestion: 'è©²å½“ãƒ‡ãƒ¼ã‚¿ã®å‰Šé™¤ã¾ãŸã¯ä¿®æ­£ã‚’æ¤œè¨ã—ã¦ãã ã•ã„'
      });
    }

    return {
      name: 'Visual Analyticsæ•´åˆæ€§',
      status: issues.filter(i => i.type === 'error').length === 0 ? 'passed' : 'failed',
      totalItems: screenshots.length,
      healthyItems: validCount,
      issues,
      metrics: {
        validDataRate: screenshots.length > 0 ? (validCount / screenshots.length) * 100 : 100,
        storageUsage: await this.calculateStorageUsage()
      }
    };
  }
}
```

#### 2.2 ãƒ‡ãƒ¼ã‚¿è¨ºæ–­UI
```typescript
const DataDiagnostics: React.FC = () => {
  const [diagnosticResult, setDiagnosticResult] = useState<DiagnosticResult | null>(null);
  const [isRunning, setIsRunning] = useState(false);
  const [selectedCheck, setSelectedCheck] = useState<string | null>(null);

  const runDiagnostics = useCallback(async () => {
    setIsRunning(true);
    try {
      const checker = new DataIntegrityChecker();
      const result = await checker.performComprehensiveCheck();
      setDiagnosticResult(result);
    } catch (error) {
      console.error('Diagnostic error:', error);
    } finally {
      setIsRunning(false);
    }
  }, []);

  return (
    <div className="space-y-6">
      {/* è¨ºæ–­å®Ÿè¡Œãƒœã‚¿ãƒ³ */}
      <div className="flex items-center justify-between">
        <h3 className="text-lg font-semibold">ãƒ‡ãƒ¼ã‚¿è¨ºæ–­</h3>
        <Button
          onClick={runDiagnostics}
          disabled={isRunning}
          className="flex items-center gap-2"
        >
          {isRunning ? (
            <>
              <Loader2 className="w-4 h-4 animate-spin" />
              è¨ºæ–­å®Ÿè¡Œä¸­...
            </>
          ) : (
            <>
              <Play className="w-4 h-4" />
              è¨ºæ–­é–‹å§‹
            </>
          )}
        </Button>
      </div>

      {/* è¨ºæ–­çµæœã‚µãƒãƒªãƒ¼ */}
      {diagnosticResult && (
        <>
          <Card className="p-4">
            <div className="grid grid-cols-3 gap-4 text-center">
              <div className="p-3 bg-green-50 rounded-lg">
                <div className="text-2xl font-bold text-green-600">
                  {diagnosticResult.summary.passed}
                </div>
                <div className="text-sm text-green-700">åˆæ ¼</div>
              </div>
              <div className="p-3 bg-yellow-50 rounded-lg">
                <div className="text-2xl font-bold text-yellow-600">
                  {diagnosticResult.summary.warnings}
                </div>
                <div className="text-sm text-yellow-700">è­¦å‘Š</div>
              </div>
              <div className="p-3 bg-red-50 rounded-lg">
                <div className="text-2xl font-bold text-red-600">
                  {diagnosticResult.summary.failed}
                </div>
                <div className="text-sm text-red-700">ã‚¨ãƒ©ãƒ¼</div>
              </div>
            </div>
          </Card>

          {/* è©³ç´°ãƒã‚§ãƒƒã‚¯çµæœ */}
          <div className="space-y-4">
            {diagnosticResult.checks.map((check, index) => (
              <DiagnosticCheckCard
                key={index}
                check={check}
                isSelected={selectedCheck === check.name}
                onSelect={() => setSelectedCheck(
                  selectedCheck === check.name ? null : check.name
                )}
              />
            ))}
          </div>

          {/* æ¨å¥¨äº‹é … */}
          {diagnosticResult.recommendations.length > 0 && (
            <Card className="p-4">
              <h4 className="font-medium mb-3">æ¨å¥¨äº‹é …</h4>
              <ul className="space-y-2">
                {diagnosticResult.recommendations.map((rec, index) => (
                  <li key={index} className="flex items-start gap-2">
                    <AlertTriangle className="w-4 h-4 text-yellow-500 mt-0.5" />
                    <span className="text-sm">{rec}</span>
                  </li>
                ))}
              </ul>
            </Card>
          )}
        </>
      )}
    </div>
  );
};
```

### 3. å›å¾©ãƒ„ãƒ¼ãƒ«ã‚·ã‚¹ãƒ†ãƒ 

#### 3.1 ãƒãƒ«ã‚¯æ“ä½œ
```typescript
class RecoveryToolsEngine {
  async executeBlkExtraction(
    companyIds: string[],
    provider: 'openai' | 'perplexity',
    options: BulkExtractionOptions
  ): Promise<BulkOperationResult> {
    const result: BulkOperationResult = {
      total: companyIds.length,
      successful: 0,
      failed: 0,
      results: [],
      startTime: new Date(),
      endTime: null
    };

    const batchSize = options.batchSize || (import.meta.env.PROD ? 2 : 5);
    const delay = options.delay || (import.meta.env.PROD ? 2000 : 1000);

    // ãƒãƒƒãƒå‡¦ç†
    for (let i = 0; i < companyIds.length; i += batchSize) {
      const batch = companyIds.slice(i, i + batchSize);
      const batchPromises = batch.map(async (companyId, index) => {
        try {
          // æ®µéšçš„é…å»¶
          if (index > 0) {
            await new Promise(resolve => setTimeout(resolve, delay * index));
          }

          const company = await companyStore.getCompany(companyId);
          if (!company) {
            throw new Error('ä¼æ¥­ãƒ‡ãƒ¼ã‚¿ãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“');
          }

          // MVVæŠ½å‡ºå®Ÿè¡Œ
          const response = await this.callExtractionAPI(company, provider);
          if (response.success) {
            await mvvStore.updateMVVResult(companyId, response.data);
            result.successful++;
            result.results.push({
              companyId,
              companyName: company.name,
              status: 'success',
              data: response.data
            });
          } else {
            throw new Error(response.error || 'æŠ½å‡ºã«å¤±æ•—ã—ã¾ã—ãŸ');
          }
        } catch (error) {
          result.failed++;
          result.results.push({
            companyId,
            companyName: company?.name || 'Unknown',
            status: 'failed',
            error: error.message
          });
        }
      });

      await Promise.allSettled(batchPromises);

      // ãƒãƒƒãƒé–“é…å»¶
      if (i + batchSize < companyIds.length) {
        await new Promise(resolve => setTimeout(resolve, delay));
      }
    }

    result.endTime = new Date();
    return result;
  }

  async repairDataInconsistencies(diagnosticResult: DiagnosticResult): Promise<RepairResult> {
    const repairs: RepairOperation[] = [];
    let successCount = 0;
    let failureCount = 0;

    for (const check of diagnosticResult.checks) {
      for (const issue of check.issues) {
        if (issue.type === 'error' && issue.companyId) {
          try {
            const repair = await this.attemptAutoRepair(issue);
            if (repair.success) {
              successCount++;
              repairs.push({
                issueId: `${issue.companyId}_${issue.field}`,
                action: repair.action,
                status: 'success',
                details: repair.details
              });
            } else {
              failureCount++;
              repairs.push({
                issueId: `${issue.companyId}_${issue.field}`,
                action: 'attempted',
                status: 'failed',
                details: repair.error
              });
            }
          } catch (error) {
            failureCount++;
            repairs.push({
              issueId: `${issue.companyId}_${issue.field}`,
              action: 'error',
              status: 'failed',
              details: error.message
            });
          }
        }
      }
    }

    return {
      totalIssues: diagnosticResult.checks.reduce((sum, check) => sum + check.issues.length, 0),
      repairedCount: successCount,
      failedCount: failureCount,
      repairs,
      timestamp: new Date()
    };
  }

  private async attemptAutoRepair(issue: Issue): Promise<AutoRepairResult> {
    switch (issue.field) {
      case 'website':
        if (issue.message.includes('ç„¡åŠ¹ãªURL')) {
          // URLä¿®æ­£ã®è©¦è¡Œ
          const company = await companyStore.getCompany(issue.companyId);
          if (company?.website) {
            const correctedUrl = this.correctURL(company.website);
            if (correctedUrl !== company.website) {
              await companyStore.updateCompany(issue.companyId, { website: correctedUrl });
              return {
                success: true,
                action: 'url_correction',
                details: `URLä¿®æ­£: ${company.website} â†’ ${correctedUrl}`
              };
            }
          }
        }
        break;

      case 'category':
        if (issue.message.includes('æœªåˆ†é¡')) {
          // è‡ªå‹•ã‚«ãƒ†ã‚´ãƒªæ¨å®š
          const company = await companyStore.getCompany(issue.companyId);
          if (company?.name) {
            const estimatedCategory = await this.estimateCategory(company.name, company.website);
            if (estimatedCategory && estimatedCategory !== 'ãã®ä»–') {
              await companyStore.updateCompany(issue.companyId, { category: estimatedCategory });
              return {
                success: true,
                action: 'category_estimation',
                details: `ã‚«ãƒ†ã‚´ãƒªæ¨å®š: ${estimatedCategory}`
              };
            }
          }
        }
        break;
    }

    return {
      success: false,
      error: 'Automatic repair not available for this issue type'
    };
  }
}
```

#### 3.2 å›å¾©ãƒ„ãƒ¼ãƒ«UI
```typescript
const RecoveryTools: React.FC = () => {
  const [activeOperation, setActiveOperation] = useState<string | null>(null);
  const [operationResult, setOperationResult] = useState<OperationResult | null>(null);

  const operations: RecoveryOperation[] = [
    {
      id: 'bulk-mvv-extraction',
      name: 'ãƒãƒ«ã‚¯MVVæŠ½å‡º',
      description: 'é¸æŠã—ãŸä¼æ¥­ã®MVVã‚’ä¸€æ‹¬æŠ½å‡ºã—ã¾ã™',
      icon: Download,
      component: BulkExtractionTool,
      risk: 'medium'
    },
    {
      id: 'data-repair',
      name: 'ãƒ‡ãƒ¼ã‚¿ä¿®å¾©',
      description: 'è¨ºæ–­ã§ç™ºè¦‹ã•ã‚ŒãŸå•é¡Œã‚’è‡ªå‹•ä¿®å¾©ã—ã¾ã™',
      icon: Wrench,
      component: DataRepairTool,
      risk: 'low'
    },
    {
      id: 'pipeline-retry',
      name: 'ãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³å†å®Ÿè¡Œ',
      description: 'å¤±æ•—ã—ãŸãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³å‡¦ç†ã‚’å†å®Ÿè¡Œã—ã¾ã™',
      icon: RefreshCw,
      component: PipelineRetryTool,
      risk: 'medium'
    },
    {
      id: 'cache-management',
      name: 'ã‚­ãƒ£ãƒƒã‚·ãƒ¥ç®¡ç†',
      description: 'ã‚·ã‚¹ãƒ†ãƒ ã‚­ãƒ£ãƒƒã‚·ãƒ¥ã®ã‚¯ãƒªã‚¢ã¨æœ€é©åŒ–ã‚’è¡Œã„ã¾ã™',
      icon: Database,
      component: CacheManagementTool,
      risk: 'low'
    }
  ];

  return (
    <div className="space-y-6">
      <div>
        <h3 className="text-lg font-semibold mb-4">å›å¾©ãƒ„ãƒ¼ãƒ«</h3>
        <Alert className="mb-4">
          <AlertTriangle className="w-4 h-4" />
          <AlertDescription>
            ã“ã‚Œã‚‰ã®ãƒ„ãƒ¼ãƒ«ã¯ã‚·ã‚¹ãƒ†ãƒ ãƒ‡ãƒ¼ã‚¿ã«å½±éŸ¿ã‚’ä¸ãˆã‚‹å¯èƒ½æ€§ãŒã‚ã‚Šã¾ã™ã€‚å®Ÿè¡Œå‰ã«å¿…ãšãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—ã‚’ä½œæˆã—ã¦ãã ã•ã„ã€‚
          </AlertDescription>
        </Alert>
      </div>

      <div className="grid grid-cols-1 md:grid-cols-2 gap-4">
        {operations.map((operation) => (
          <Card
            key={operation.id}
            className={`p-4 cursor-pointer transition-colors ${
              activeOperation === operation.id
                ? 'border-blue-500 bg-blue-50'
                : 'hover:bg-gray-50'
            }`}
            onClick={() => setActiveOperation(operation.id)}
          >
            <div className="flex items-start gap-3">
              <operation.icon className="w-6 h-6 text-blue-600 mt-1" />
              <div className="flex-1">
                <h4 className="font-medium">{operation.name}</h4>
                <p className="text-sm text-gray-600 mt-1">{operation.description}</p>
                <div className="flex items-center gap-2 mt-2">
                  <Badge variant={operation.risk === 'high' ? 'destructive' : operation.risk === 'medium' ? 'secondary' : 'outline'}>
                    {operation.risk === 'high' ? 'é«˜ãƒªã‚¹ã‚¯' : operation.risk === 'medium' ? 'ä¸­ãƒªã‚¹ã‚¯' : 'ä½ãƒªã‚¹ã‚¯'}
                  </Badge>
                </div>
              </div>
            </div>
          </Card>
        ))}
      </div>

      {/* é¸æŠã•ã‚ŒãŸæ“ä½œã®è©³ç´° */}
      {activeOperation && (
        <Card className="p-6">
          <RecoveryOperationDetail
            operationId={activeOperation}
            onResult={setOperationResult}
            onClose={() => setActiveOperation(null)}
          />
        </Card>
      )}

      {/* æ“ä½œçµæœ */}
      {operationResult && (
        <OperationResultDisplay
          result={operationResult}
          onClose={() => setOperationResult(null)}
        />
      )}
    </div>
  );
};
```

### 4. ã‚·ã‚¹ãƒ†ãƒ è¨ºæ–­

#### 4.1 APIå¥å…¨æ€§ç›£è¦–
```typescript
class SystemHealthMonitor {
  async performHealthCheck(): Promise<SystemHealthResult> {
    const healthChecks = await Promise.allSettled([
      this.checkAPIEndpoints(),
      this.checkDatabaseConnectivity(),
      this.checkExternalServices(),
      this.checkPerformanceMetrics(),
      this.checkStorageStatus()
    ]);

    const results = healthChecks.map((check, index) => ({
      name: ['API Endpoints', 'Database', 'External Services', 'Performance', 'Storage'][index],
      status: check.status === 'fulfilled' ? check.value.status : 'failed',
      details: check.status === 'fulfilled' ? check.value.details : check.reason?.message,
      metrics: check.status === 'fulfilled' ? check.value.metrics : {}
    }));

    return {
      overallStatus: results.every(r => r.status === 'healthy') ? 'healthy' : 'unhealthy',
      timestamp: new Date(),
      checks: results,
      summary: this.generateHealthSummary(results)
    };
  }

  private async checkAPIEndpoints(): Promise<HealthCheckResult> {
    const endpoints = [
      { name: 'Health Check', url: '/.netlify/functions/health' },
      { name: 'Auth Validate', url: '/.netlify/functions/auth-validate-v2' },
      { name: 'MVV Extract', url: '/.netlify/functions/extract-mvv' },
      { name: 'Company Info', url: '/.netlify/functions/extract-company-info' }
    ];

    const results = await Promise.allSettled(
      endpoints.map(async (endpoint) => {
        const start = performance.now();
        try {
          const response = await fetch(endpoint.url, {
            method: endpoint.name === 'Health Check' ? 'GET' : 'POST',
            headers: {
              'Content-Type': 'application/json',
              ...(endpoint.name !== 'Health Check' && {
                'X-API-Key': 'health-check-key'
              })
            },
            ...(endpoint.name !== 'Health Check' && {
              body: JSON.stringify({ test: true })
            })
          });

          const responseTime = performance.now() - start;
          return {
            name: endpoint.name,
            status: response.status < 500 ? 'healthy' : 'unhealthy',
            responseTime,
            statusCode: response.status
          };
        } catch (error) {
          return {
            name: endpoint.name,
            status: 'failed',
            responseTime: performance.now() - start,
            error: error.message
          };
        }
      })
    );

    const endpointResults = results.map(r => r.status === 'fulfilled' ? r.value : r.reason);
    const healthyCount = endpointResults.filter(r => r.status === 'healthy').length;

    return {
      status: healthyCount === endpoints.length ? 'healthy' : 'unhealthy',
      details: `${healthyCount}/${endpoints.length} endpoints healthy`,
      metrics: {
        healthyEndpoints: healthyCount,
        totalEndpoints: endpoints.length,
        averageResponseTime: endpointResults.reduce((sum, r) => sum + (r.responseTime || 0), 0) / endpoints.length,
        endpointDetails: endpointResults
      }
    };
  }

  private async checkPerformanceMetrics(): Promise<HealthCheckResult> {
    const metrics = {
      memoryUsage: this.getMemoryUsage(),
      indexedDBSize: await this.getIndexedDBSize(),
      cacheHitRate: await this.getCacheHitRate(),
      averageAnalysisTime: await this.getAverageAnalysisTime()
    };

    const isHealthy = (
      metrics.memoryUsage.percentage < 80 &&
      metrics.indexedDBSize < 100 * 1024 * 1024 && // 100MB
      metrics.cacheHitRate > 50
    );

    return {
      status: isHealthy ? 'healthy' : 'warning',
      details: `Memory: ${metrics.memoryUsage.percentage.toFixed(1)}%, Cache: ${metrics.cacheHitRate.toFixed(1)}%`,
      metrics
    };
  }

  private getMemoryUsage(): MemoryUsage {
    if ('memory' in performance) {
      const memory = (performance as any).memory;
      return {
        used: memory.usedJSHeapSize,
        total: memory.totalJSHeapSize,
        limit: memory.jsHeapSizeLimit,
        percentage: (memory.usedJSHeapSize / memory.jsHeapSizeLimit) * 100
      };
    }
    return { used: 0, total: 0, limit: 0, percentage: 0 };
  }
}
```

#### 4.2 ã‚·ã‚¹ãƒ†ãƒ è¨ºæ–­UI
```typescript
const SystemDiagnostics: React.FC = () => {
  const [healthResult, setHealthResult] = useState<SystemHealthResult | null>(null);
  const [isMonitoring, setIsMonitoring] = useState(false);
  const [monitoringInterval, setMonitoringInterval] = useState<NodeJS.Timeout | null>(null);

  const runHealthCheck = useCallback(async () => {
    const monitor = new SystemHealthMonitor();
    const result = await monitor.performHealthCheck();
    setHealthResult(result);
  }, []);

  const startMonitoring = useCallback(() => {
    if (monitoringInterval) return;
    
    setIsMonitoring(true);
    runHealthCheck(); // å³åº§ã«å®Ÿè¡Œ
    
    const interval = setInterval(runHealthCheck, 30000); // 30ç§’é–“éš”
    setMonitoringInterval(interval);
  }, [runHealthCheck, monitoringInterval]);

  const stopMonitoring = useCallback(() => {
    if (monitoringInterval) {
      clearInterval(monitoringInterval);
      setMonitoringInterval(null);
    }
    setIsMonitoring(false);
  }, [monitoringInterval]);

  return (
    <div className="space-y-6">
      <div className="flex items-center justify-between">
        <h3 className="text-lg font-semibold">ã‚·ã‚¹ãƒ†ãƒ è¨ºæ–­</h3>
        <div className="flex gap-2">
          <Button
            variant="outline"
            onClick={runHealthCheck}
            disabled={isMonitoring}
          >
            æ‰‹å‹•ãƒã‚§ãƒƒã‚¯
          </Button>
          {isMonitoring ? (
            <Button
              variant="destructive"
              onClick={stopMonitoring}
              className="flex items-center gap-2"
            >
              <Square className="w-4 h-4" />
              ç›£è¦–åœæ­¢
            </Button>
          ) : (
            <Button
              onClick={startMonitoring}
              className="flex items-center gap-2"
            >
              <Play className="w-4 h-4" />
              ç›£è¦–é–‹å§‹
            </Button>
          )}
        </div>
      </div>

      {/* ã‚·ã‚¹ãƒ†ãƒ çŠ¶æ…‹æ¦‚è¦ */}
      {healthResult && (
        <>
          <Card className="p-4">
            <div className="flex items-center gap-3 mb-4">
              <div
                className={`w-4 h-4 rounded-full ${
                  healthResult.overallStatus === 'healthy'
                    ? 'bg-green-500'
                    : 'bg-red-500'
                }`}
              />
              <h4 className="font-medium">
                ã‚·ã‚¹ãƒ†ãƒ çŠ¶æ…‹: {healthResult.overallStatus === 'healthy' ? 'æ­£å¸¸' : 'ç•°å¸¸'}
              </h4>
              {isMonitoring && (
                <Badge variant="outline" className="ml-auto">
                  <Activity className="w-3 h-3 mr-1" />
                  ç›£è¦–ä¸­
                </Badge>
              )}
            </div>
            <div className="text-sm text-gray-600">
              æœ€çµ‚æ›´æ–°: {healthResult.timestamp.toLocaleString('ja-JP')}
            </div>
          </Card>

          {/* è©³ç´°ãƒã‚§ãƒƒã‚¯çµæœ */}
          <div className="grid grid-cols-1 lg:grid-cols-2 gap-4">
            {healthResult.checks.map((check, index) => (
              <HealthCheckCard key={index} check={check} />
            ))}
          </div>

          {/* ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ãƒ¡ãƒˆãƒªã‚¯ã‚¹ */}
          <PerformanceMetricsDisplay metrics={healthResult.summary.metrics} />
        </>
      )}
    </div>
  );
};
```

## ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£

### ã‚¢ã‚¯ã‚»ã‚¹åˆ¶å¾¡
- JWTèªè¨¼ã«ã‚ˆã‚‹ç®¡ç†è€…æ¨©é™ç¢ºèª
- æ“ä½œãƒ­ã‚°ã®è‡ªå‹•è¨˜éŒ²
- ã‚»ãƒƒã‚·ãƒ§ãƒ³æœ‰åŠ¹æœŸé™ãƒã‚§ãƒƒã‚¯
- æ‚ªæ„ã®ã‚ã‚‹ã‚¢ã‚¯ã‚»ã‚¹ã®æ¤œå‡º

### ç›£æŸ»ãƒ­ã‚°
```typescript
interface AdminAuditLog {
  timestamp: string;
  userId: string;
  action: string;
  details: Record<string, any>;
  ipAddress: string;
  userAgent: string;
  sessionId: string;
}
```

## é‹ç”¨ãƒ»ä¿å®ˆ

### ç›£è¦–æŒ‡æ¨™
- ç®¡ç†è€…ãƒ‘ãƒãƒ«ã‚¢ã‚¯ã‚»ã‚¹é »åº¦
- è¨ºæ–­å®Ÿè¡Œå›æ•°ã¨çµæœ
- å›å¾©æ“ä½œã®æˆåŠŸç‡
- ã‚·ã‚¹ãƒ†ãƒ å¥å…¨æ€§ãƒˆãƒ¬ãƒ³ãƒ‰

### ã‚¢ãƒ©ãƒ¼ãƒˆæ©Ÿèƒ½
- é‡å¤§ãªãƒ‡ãƒ¼ã‚¿æ•´åˆæ€§ã‚¨ãƒ©ãƒ¼
- ã‚·ã‚¹ãƒ†ãƒ å¥å…¨æ€§ã®ç•°å¸¸
- å¤§é‡ã®ã‚¨ãƒ©ãƒ¼ç™ºç”Ÿ
- ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹åŠ£åŒ–

## çµè«–

Admin Panelã¯ã€MVVåˆ†æã‚·ã‚¹ãƒ†ãƒ ã®ä¿¡é ¼æ€§ã¨é‹ç”¨åŠ¹ç‡ã‚’æ”¯ãˆã‚‹é‡è¦ãªã‚¤ãƒ³ãƒ•ãƒ©ã‚¹ãƒˆãƒ©ã‚¯ãƒãƒ£ã§ã™ã€‚

### âœ… æŠ€è¡“çš„æˆæœ
- **éš ã—ã‚¢ã‚¯ã‚»ã‚¹**: ã‚»ã‚­ãƒ¥ã‚¢ãªç®¡ç†è€…å°‚ç”¨ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹
- **åŒ…æ‹¬çš„è¨ºæ–­**: ãƒ‡ãƒ¼ã‚¿æ•´åˆæ€§ã‹ã‚‰ã‚·ã‚¹ãƒ†ãƒ å¥å…¨æ€§ã¾ã§å…¨æ–¹ä½ç›£è¦–
- **è‡ªå‹•å›å¾©**: å•é¡Œã®è‡ªå‹•æ¤œå‡ºã¨ä¿®å¾©æ©Ÿèƒ½
- **ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ç›£è¦–**: ç¶™ç¶šçš„ãªã‚·ã‚¹ãƒ†ãƒ çŠ¶æ…‹ç›£è¦–

### ğŸš€ é‹ç”¨ä¾¡å€¤
- **äºˆé˜²ä¿å®ˆ**: å•é¡Œã®æ—©æœŸç™ºè¦‹ã¨è‡ªå‹•ä¿®å¾©
- **é‹ç”¨åŠ¹ç‡**: æ‰‹å‹•ä½œæ¥­ã®è‡ªå‹•åŒ–ã¨åŠ¹ç‡åŒ–
- **ã‚·ã‚¹ãƒ†ãƒ ä¿¡é ¼æ€§**: ç¶™ç¶šçš„ãªå¥å…¨æ€§ç›£è¦–ã«ã‚ˆã‚‹å®‰å®šç¨¼åƒ
- **ãƒˆãƒ©ãƒ–ãƒ«ã‚·ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚°**: è¿…é€Ÿãªå•é¡Œè§£æ±ºã¨ãƒ‡ãƒ¼ã‚¿å›å¾©

Phase 3å®Œäº†ã«ã‚ˆã‚Šã€Admin Panelã¯ã‚¨ãƒ³ã‚¿ãƒ¼ãƒ—ãƒ©ã‚¤ã‚ºãƒ¬ãƒ™ãƒ«ã®é‹ç”¨ç®¡ç†æ©Ÿèƒ½ã‚’æä¾›ã—ã€Phase 4ã§ã®æ›´ãªã‚‹æ©Ÿèƒ½æ‹¡å¼µã®åŸºç›¤ã‚’ç¢ºç«‹ã—ã¾ã—ãŸã€‚

---

**æœ€çµ‚æ›´æ–°**: 2025-07-13  
**Phase**: 3å®Œäº† (Admin Panel with Comprehensive Management Features)  
**æ¬¡æœŸè¨ˆç”»**: Phase 4 (Enhanced monitoring and enterprise operations)